### Rebind leader ###
unbind C-b
set -g prefix C-a
bind C-a send-prefix

### Terminal settings ###
set -g default-terminal "xterm-256color"
set-option -ga terminal-overrides ",xterm-256color:Tc"

### Start window and pane indexing at 1 ###
set -g base-index 1
setw -g pane-base-index 1

### Mouse support ###
set -g mouse on

# Scroll wheel fix for atuin etc.
bind -T root WheelUpPane if-shell -F -t= "#{pane_in_mode}" \
  "send-keys -M" "copy-mode -e"

### Vim-aware pane navigation (using pane_current_command) ###
bind-key -n C-h if-shell '[ "#{pane_current_command}" =~ "vim|nvim|fzf" ]' \
  'send-keys C-h' 'select-pane -L'
bind-key -n C-j if-shell '[ "#{pane_current_command}" =~ "vim|nvim|fzf" ]' \
  'send-keys C-j' 'select-pane -D'
bind-key -n C-k if-shell '[ "#{pane_current_command}" =~ "vim|nvim|fzf" ]' \
  'send-keys C-k' 'select-pane -U'
bind-key -n C-l if-shell '[ "#{pane_current_command}" =~ "vim|nvim|fzf" ]' \
  'send-keys C-l' 'select-pane -R'

##### Theme: Gruvbox Dark Minimal + Centered Tabs #####

# Status bar at the top
set-option -g status-position top

# Gruvbox colors
set -g status-style "bg=#282828,fg=#ebdbb2"

# Left side: leave empty or show session name
set -g status-left-length 20
set -g status-left "#[fg=#98971a]#[bold] #S #[default]"

# Right side: date & time
set -g status-right-length 60
set -g status-right "#[fg=#b16286]%Y-%m-%d #[fg=#d79921]%H:%M #[default]"

# Center the tabs by padding left/right
set -g status-justify centre
setw -g window-status-format " #I:#W "
setw -g window-status-current-format "#[fg=#458588,bold] #I:#W #[default]"
setw -g window-status-style "fg=#a89984,bg=default"
setw -g window-status-current-style "fg=#ebdbb2,bg=#3c3836"

# Pane border colors
set -g pane-border-style "fg=#928374"
set -g pane-active-border-style "fg=#fabd2f"

# Message styling
set -g message-style "bg=#3c3836,fg=#fbf1c7"

# Copy mode style
set -g mode-style "bg=#665c54,fg=#fabd2f"

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
# set -g @plugin 'erikw/tmux-powerline'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
